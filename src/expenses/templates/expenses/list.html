<!DOCTYPE html>
<html>
<head>
    <title>Expenses</title>
</head>
<body>

<header>
  <h1>Your expenses</h1>

  <p>
      Logged in as {{ request.user.username }}
  </p>

  <form action="{% url 'users:logout' %}" method="post">
      {% csrf_token %}
      <button type="submit">Logout</button>
  </form>
</header>

<hr>

<section>
  <h2>Add category</h2>

  <form method="post" action="{% url 'categories:create' %}">
      {% csrf_token %}
      <input type="text" name="name" required>
      <button type="submit">Add</button>
  </form>
</section>

<section>
  <h2>Add expense</h2>

  <form method="post" action="{% url 'expenses:create' %}">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Save</button>
  </form>
</section>

<hr>

<section>
  <h2>Expense list</h2>

  <table border="1" cellpadding="6">
      <thead>
          <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Category</th>
              <th>Amount</th>
              <th></th>
          </tr>
      </thead>
      <tbody>
          {% for expense in expenses %}
              <tr>
                  <td>{{ expense.date }}</td>
                  <td>{{ expense.description|default:"â€”" }}</td>
                  <td>{{ expense.category.name|default:"Uncategorized" }}</td>
                  <td>{{ expense.currency }} {{ expense.amount }}</td>
                  <td>
                      <form method="post" action="{% url 'expenses:delete' expense.pk %}">
                          {% csrf_token %}
                          <button type="submit">Delete</button>
                      </form>
                  </td>
              </tr>
          {% empty %}
              <tr>
                  <td colspan="5">No expenses yet.</td>
              </tr>
          {% endfor %}
      </tbody>
  </table>
</section>

</body>
</html>